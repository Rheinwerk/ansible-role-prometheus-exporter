---
# Generic Prometheus Exporter Role
# This role installs any Prometheus exporter from GitHub releases

# Exporter configuration - must be provided when using the role
prometheus_exporter_name: ""
prometheus_exporter_version: ""
prometheus_exporter_listen_address: "127.0.0.1"
prometheus_exporter_listen_port: ""

# GitHub repository (default: prometheus-community or prometheus org)
prometheus_exporter_github_org: "prometheus-community"
prometheus_exporter_github_repo: "{{ prometheus_exporter_name }}"

# Binary name (usually same as exporter name)
prometheus_exporter_binary_name: "{{ prometheus_exporter_name }}"

# System user/group for the exporter
prometheus_exporter_system_user: "{{ prometheus_exporter_name | replace('-', '_') | replace('_exporter', '') }}_exporter"
prometheus_exporter_system_group: "{{ prometheus_exporter_system_user }}"

# Installation paths
prometheus_exporter_install_dir: "/usr/local/bin"
prometheus_exporter_config_dir: "/etc/{{ prometheus_exporter_name }}"

# Service configuration
prometheus_exporter_service_name: "{{ prometheus_exporter_name }}"
prometheus_exporter_service_enabled: true
prometheus_exporter_service_state: stopped

# Extra command line arguments (list)
prometheus_exporter_extra_args: []

# Environment variables for systemd service
prometheus_exporter_env_vars: {}

# Architecture mapping
prometheus_exporter_arch_map:
  x86_64: "amd64"
  aarch64: "arm64"
  armv7l: "armv7"

# Download URL template (can be overridden for non-standard releases)
prometheus_exporter_download_url: >-
  https://github.com/{{ prometheus_exporter_github_org }}/{{ prometheus_exporter_github_repo }}/releases/download/v{{ prometheus_exporter_version }}/{{ prometheus_exporter_name }}-{{ prometheus_exporter_version }}.linux-{{ prometheus_exporter_arch_map[ansible_architecture] | default('amd64') }}.tar.gz

# Checksum URL (optional)
prometheus_exporter_checksum_url: ""
